(function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};this.Mercury.Toolbar.Expander=function(){function a(b,c){return this.name=b,this.options=c,this.container=this.options["for"],this.containerWidth=this.container.outerWidth(),a.__super__.constructor.call(this,null,this.name,this.options),this.element}return b(a,Mercury.Palette),a.prototype.build=function(){var a;return this.container.css({whiteSpace:"normal"}),this.trigger=jQuery("<div>",{"class":"mercury-toolbar-expander"}).appendTo((a=jQuery(this.options.appendTo).get(0))!=null?a:"body"),this.element=jQuery("<div>",{"class":"mercury-palette mercury-expander mercury-"+this.name+"-expander",style:"display:none"}),this.windowResize()},a.prototype.bindEvents=function(){return Mercury.bind("hide:dialogs",c(function(a,b){if(b!==this)return this.hide()},this)),Mercury.bind("resize",c(function(){return this.windowResize()},this)),a.__super__.bindEvents.apply(this,arguments),this.trigger.click(c(function(a){var b,c,d,e,f;a.stopPropagation(),c=[],f=this.container.find(".mercury-button");for(d=0,e=f.length;d<e;d++)b=f[d],b=jQuery(b),b.position().top>5&&c.push(b.data("expander"));return this.loadContent(c.join("")),this.toggle()},this)),this.element.click(c(function(a){var b,c;return c=jQuery(a.target).closest("[data-button]").data("button"),b=this.container.find(".mercury-"+c+"-button"),b.click()},this))},a.prototype.windowResize=function(){return this.containerWidth>jQuery(window).width()?this.trigger.show():this.trigger.hide(),this.hide()},a.prototype.position=function(a){var b,c;return this.element.css({top:0,left:0,display:"block",visibility:"hidden"}),b=this.trigger.offset(),c=this.element.width(),b.left+c>jQuery(window).width()&&(b.left=b.left-c+this.trigger.width()),this.element.css({top:b.top+this.trigger.height(),left:b.left,display:a?"block":"none",visibility:"visible"})},a}()}).call(this)